{"version":3,"sources":["Firebase.js","Header.js","Chat.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","firestore","Header","className","href","src","alt","height","SignOut","currentUser","onClick","signOut","Chat","bottomMessageRef","useRef","inputMessageRef","messagesCollection","collection","query","orderBy","limitToLast","useCollectionData","idField","snapshotListenOptions","messages","useState","message","setMessage","onSnapshot","next","e","size","current","scrollIntoView","behavior","useEffect","focus","onSubmit","a","preventDefault","add","text","createdAt","FieldValue","serverTimestamp","uid","photoURL","displayName","id","map","msg","i","timeAgoInfo","nameInfo","lastMessage","timeDiff","seconds","format","Fragment","ChatMessage","ref","name","placeholder","autoComplete","value","onChange","target","type","props","messageWasSent","messageClasses","SignIn","provider","GoogleAuthProvider","signInWithPopup","FacebookAuthProvider","App","useAuthState","user","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.17151552.chunk.js","sourcesContent":["import firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport 'firebase/compat/firestore';\n\nfirebase.initializeApp({\n    apiKey: \"AIzaSyBq__aBYuqn7QJKNJCFlp9ljHbkfrhzyrY\",\n    authDomain: \"react-chat-c2718.firebaseapp.com\",\n    projectId: \"react-chat-c2718\",\n    storageBucket: \"react-chat-c2718.appspot.com\",\n    messagingSenderId: \"582876886291\",\n    appId: \"1:582876886291:web:3ccbdf4a11e845376c16e6\",\n    measurementId: \"G-LF0SC3KMPF\"\n})\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();","import { auth } from \"./Firebase\"\nimport './Header.css';\n\nexport function Header() {\n    return (\n        <header>\n            <a className=\"logo\" href=\"/\">\n                <img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K\" alt=\"\" height=\"20\" />\n                <span className=\"css-184keb2\">React Chat</span>\n            </a>\n            <span className=\"flexer\"></span>\n            <div className=\"actions\">\n                <SignOut />\n            </div>\n        </header>\n    )\n}\n\nfunction SignOut() {\n    return auth.currentUser && (\n        <button onClick={() => auth.signOut()}>Sign out</button>\n    )\n}","import './Chat.css';\nimport 'animate.css/animate.min.css'\n\nimport React, { useState, useEffect, useRef } from \"react\";\n\nimport firebase from 'firebase/compat/app';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport { auth, firestore } from './Firebase';\nimport { format } from 'timeago.js';\n\nexport function Chat() {\n    const bottomMessageRef = useRef(null);\n    const inputMessageRef = useRef(null);\n    const messagesCollection = firestore.collection('messages');\n    const query = messagesCollection.orderBy('createdAt').limitToLast(50);\n    const [messages] = useCollectionData(query, { idField: 'id', snapshotListenOptions: {} });\n    const [message, setMessage] = useState('');\n\n    let lastSize = 0;\n    query.onSnapshot({\n        next: (e) => {\n            if (e.size !== lastSize) bottomMessageRef.current?.scrollIntoView({ behavior: 'smooth' })\n        }\n    })\n\n    useEffect(() => {\n        inputMessageRef.current?.focus();\n    }, []);\n\n    const onSubmit = async (e) => {\n        inputMessageRef.current?.focus();\n        e.preventDefault();\n        if (!message) return;\n        await messagesCollection.add({\n            text: message,\n            createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n            uid: auth.currentUser.uid,\n            photoURL: auth.currentUser.photoURL,\n            displayName: auth.currentUser.displayName\n        })\n        setMessage('');\n    }\n\n    return (\n        <div id=\"chat\">\n            <div id=\"messages\">\n                {messages?.map((msg, i) => {\n                    let timeAgoInfo, nameInfo;\n                    const lastMessage = messages[i - 1];\n                    const timeDiff = msg?.createdAt?.seconds - lastMessage?.createdAt?.seconds;\n                    if (i === 0 || timeDiff > 60) {\n                        timeAgoInfo = <p className=\"message-info message-date\">{format(msg?.createdAt?.seconds * 1000)}</p>;\n                    }\n                    const differentName = msg?.displayName !== lastMessage?.displayName;\n                    if (differentName) {\n                        nameInfo = <p className=\"message-info\">{msg?.displayName}</p>;\n                    }\n                    return (\n                        <React.Fragment key={msg.id}>\n                            {timeAgoInfo}\n                            {nameInfo}\n                            <ChatMessage key={msg.id} message={msg}></ChatMessage>\n                        </React.Fragment>\n                    )\n                })}\n                <div ref={bottomMessageRef}></div>\n            </div>\n            <form onSubmit={onSubmit}>\n                <input ref={inputMessageRef} name=\"message\" placeholder=\"Aa\" autoComplete=\"off\" value={message} onChange={(e) => setMessage(e.target.value)}></input>\n                <button type=\"submit\">Send</button>\n            </form>\n        </div>\n    )\n}\n\nfunction ChatMessage(props) {\n    const unknownPhotoURL = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAMFBMVEXg4OC9vb3f39/Kysrc3Ny+vr7Q0NDHx8fNzc3ExMTU1NTV1dXY2NjBwcG6urrLy8vXjdnDAAAEKElEQVR4nO3d63KrIBQF4IAIBgXf/22P5GpbEwGVzfasb6bTv6zhoiCQywUAAAAAAAAAAAAAAAAAAAAAAABgiVTW6k5bqyR1UQ6gbOP8RAgR/rnGKuoi7ao3bcg251vTUxdrN/31d7xHyOs5Miq3nO+W0Z2grXaf890ydtQF3Eh+aKDzpsp6YFXtSr6gZdxSh4h8wUBd0FwqMqAQTGtRxjTRR0Pl2Rev0QGFuFIXNsfKY+Injg+N2FHmid9ok9JGA3bt1Ka00cBb6iIncokBhXDURU7Tp1bhVIm8JhqpvTBg1RPj32bmOL3Z6PRGymysMVl1aKiLHU+mj6SB4/N2qnIa6dRM+XTEITMhnze3rIFmSqipCx6tywooBJ8JxvkTNpkJG+qCRzt/HZ4/oc5MyGcszZg7BYzmT+d/p0lYKZ3jtGqaMwHmNQXOmx/yGWj+hzn++ddp0pdLmS1iTDLqkLrIiZLHGlbjTJC8VMNokeYhsScyemN7SVtRZLSS+JLUTvm10SDlsc/qYf8WPYni2AnvbGRCZs/6uT4qINsaDIb1mWLLZ6V7kTQrexMNy1H0B/tne/AsX8u4C77J7kNG33b8K/BO6oV9wt7ps+S7Ud30ivOMOf13HdOH/DdqsF1jjGk6O5wwHgAAAAAAAMBFymn2a3U3Nk1jpr8xXDswKHmGVYwwrzeu9Y/LBmarNEHrDOf5vhy0ccKvnnT2whk9sKvOYUz+BjzyWftW+iqydgyJq2bQYnPjcQlpt8R7hax2pV91m+M9Q1a5XDysfGRKDGlqG3f2zVdfRpW3n3TNtZa2Kse96+/Jj1W8CHz7Aro5YgVfUNe+Ym/OSP0VPGInwla0OxmS7r7IRXlnxsEt9BWRalufPOYZsYTmLqnMYyN5WoqA5WowINieWTYgwVmFpswg8+YLHzDNOE+xOWLR1xtZPF9QsivmHmXepmA7zTu4tV252RRNFRasxKLP+rlih0wzDzJvV2xPf+5x++1KzTLybhDaQ6lJRt4NQnsodafb+evw/GNp5FGY/RU8XFN8ZhGUnV1QDDZlr46keDMtvMZfvisWP+GWeWNZLorD7Id9j1kMOJYPWGw9+BaQaE244IowTcByEQlvPSkTkfRal9Wfr9jOE99bc/hwQ/bh6eXgT4g1XLife8FenCpurTnwS3ctZ/XVQeONr2ZDzVGrbxV0wbdh/wmjq6SFPsmdp/2+qWI71A/Dl18fS85XWwU+6L0G1baKZ8QStc9HqaaeIfQvtbk7+qrzBRvrsfp8gfp0W8tq9fG5DkRak7yp3Qtj63tAfKG0Wz0QNIvnXeXnLBYpa+IeH63h+8Oyt9NdX+pyqjuOp7p+kaq/H2Lzs98D9vcja/2pfvtYDb21WndaW9vzPXQIAAAAAAAAAAAAAAAAAAAAAAAAh/oHOVI0YSQb7ewAAAAASUVORK5CYII=';\n    const messageWasSent = auth.currentUser.uid === props.message.uid;\n    const messageClasses = `message ${messageWasSent ? 'sent' : 'received'} animate__animated animate__fadeIn`\n    return (\n        <div className={messageClasses}>\n            <img className=\"avatar\" alt=\"avatar\" src={messageWasSent ? auth.currentUser.photoURL : props.message.photoURL ? props.message.photoURL : unknownPhotoURL} />\n            <div className=\"content\">{props.message.text}</div>\n        </div>\n    )\n}","import './App.css';\n\nimport firebase from 'firebase/compat/app';\n\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { auth } from './Firebase';\nimport { Header } from './Header';\nimport { Chat } from './Chat';\n\n\nfunction App() {\n  const [user] = useAuthState(auth)\n\n  return (\n    <div className=\"App\">\n      <Header />\n      {user ? <Chat /> : <SignIn />}\n    </div>\n  );\n}\n\nfunction SignIn() {\n  const signInWithGoogle = () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    auth.signInWithPopup(provider);\n  }\n  const signInWithFB = () => {\n    const provider = new firebase.auth.FacebookAuthProvider();\n    auth.signInWithPopup(provider);\n  }\n  return (\n    <div className=\"sign-in\">\n      <button className=\"sign-in-google\" onClick={signInWithGoogle}>Sign in with Google</button>\n      <button className=\"sign-in-google\" onClick={signInWithFB}>Sign in with Facebook</button>\n    </div>\n  )\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}